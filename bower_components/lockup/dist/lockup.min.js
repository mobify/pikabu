/*! lockup 1.1.3 (https://github.com/mobify/lockup.git) */
(function(t){if("function"==typeof define&&define.amd)define(["$","plugin","deckard"],t);else{var i=window.Zepto||window.jQuery;t(i,window.Plugin)}})(function(t,i){function n(t,i){n.__super__.call(this,t,i,n.DEFAULTS)}t.extend(t.fn,{renameAttr:function(i,n){return this.each(function(){var o=t(this);o.attr(n,o.attr(i)).removeAttr(i)})}});var o={CONTAINER:"lockup__container",LOCKED:"lockup--is-locked"};return n.VERSION="1.1.3",n.DEFAULTS={container:null,locked:t.noop,unlocked:t.noop},i.create("lockup",n,{_init:function(i){this.$element=t(i),this.$html=t("html"),this.$body=t("body"),this.$doc=t(document),this.$container=this._buildContainer();var n=this._instanceCount();this._instanceCount(++n)},destroy:function(){var t=this._instanceCount(),i=this.$container.data("generated");0===this._instanceCount(--t)&&i&&(this._disableScripts(function(){this.$body.append(this.$container.children())}),this.$element.removeData(this.name),this.$container.remove())},_instanceCount:function(t){return!isNaN(t)&&this.$container.data("instance",t),this.$container.data("instance")||0},_buildContainer:function(){var i=t("."+o.CONTAINER);return i.length||(i=this.options.container?t(this.options.container).addClass(o.CONTAINER):this._createContainer()),i},_createContainer:function(){return this._disableScripts(function(){this.$body.wrapInner(t("<div />").addClass(o.CONTAINER))}),this.$body.find("."+o.CONTAINER).data("generated",!0)},_disableScripts:function(t){var i=this.$body.find("script").renameAttr("src","x-src").attr("type","text/lockup-script");t.call(this),i.renameAttr("x-src","src").attr("type","text/javascript")},lock:function(){var i=this,n=function(t){return parseInt(i.$body.css("padding-"+t))};this.scrollPosition=this.$body.scrollTop(),this.$doc.off("touchmove",this._preventDefault),this.$container.addClass(o.LOCKED),t.browser.chrome?(this.$html.css("position","fixed"),this.$html.css("top",-1*this.scrollPosition)):t.os.ios&&t.os.major>=7&&(this.$body.css("margin-top",0).css("margin-bottom",0),this.$container.height(window.innerHeight).css("overflow","hidden").scrollTop(this.scrollPosition-n("top")-n("bottom"))),this._trigger("locked")},unlock:function(){this.$doc.on("touchmove",this._preventDefault),this.$container.removeClass(o.LOCKED),t.browser.chrome?(this.$html.css("position",""),this.$html.css("top",""),window.scrollTo(0,this.scrollPosition)):t.os.ios&&t.os.major>=7&&(this.$body.css("margin",""),this.$container.css("overflow","").css("height",""),window.scrollTo(0,this.scrollPosition)),this._trigger("unlocked"),this.$doc.off("touchmove",this._preventDefault)},isLocked:function(){return this.$container.hasClass(o.LOCKED)},_preventDefault:function(t){t.preventDefault()}}),t});